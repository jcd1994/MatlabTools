<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,50" id="srcline50">50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,51" id="srcline51">51</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S34T52U174">B</span> = parfor_test(<span class="var type1" id="S35T3U177">A</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"><span class="mxinfo " id="T53:U3"><span class="var type1" id="S36T53U180">f</span> = <span class="mxinfo " id="T53:U5">@func</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="mxinfo " id="T51:U6"><span class="var type1" id="S38T51U185">options</span> = <span class="mxinfo " id="T51:U8">optimset(<span class="string">'MaxFunEvals'</span>,100000,<span class="string">'Display'</span>,<span class="string">'none'</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T52:U9"><span class="var type1" id="S34T52U194">B</span> = <span class="mxinfo " id="T52:U11">zeros(<span class="mxinfo " id="T6:U12">size(<span class="var type1" id="S35T3U199">A</span>,1)</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"><span class="keyword">parfor</span> <span class="var type1" id="S42T6U204">ii</span> = <span class="mxinfo " id="T73:U15">1:size(<span class="var type1" id="S35T3U209">A</span>,2)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S43T6U213">jj</span> = <span class="mxinfo " id="T6:U18">1</span>:size(<span class="var type1" id="S35T3U218">A</span>,2)</span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line">        <span class="var type1" id="S34T52U222">B</span> = <span class="mxinfo " id="T52:U21"><span class="var type1" id="S34T52U224">B</span> + <span class="mxinfo " id="T52:U23">fminsearch(<span class="var type1" id="S36T53U227">f</span>,<span class="mxinfo " id="T52:U25"><span class="var type1" id="S35T3U229">A</span>(<span class="mxinfo " id="T72:U27">:</span>,<span class="var type1" id="S42T6U231">ii</span>)</span>,<span class="var type1" id="S38T51U232">options</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line">        <span class="mxinfo " id="T36:U30"><span class="autoExtrinsicFcn" id="F347N3:B235">disp</span>(<span class="mxinfo " id="T18:U31">[<span class="var type1" id="S42T6U238">ii</span>,<span class="var type1" id="S43T6U239">jj</span>]</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line"><span class="comment">% B = zeros(size(A));</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"><span class="comment">% parfor ii = 1:size(A,3)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="comment">%     B(:,:,ii) = A(:,:,ii)^2;</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line"><span class="comment">% end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line"></span></span>
</pre>
