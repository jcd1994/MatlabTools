<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T1U3">D</span> = squareTensorField( <span class="var type1" id="S2T1U6">D</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%SQUAREDTI Input is an MxNx3x3 (4D) or MxNxPx3x3 (5D) tensor field matrix.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%The tensor elements will be squared</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T2:U3"><span class="mxinfo " id="T3:U4">ndims(<span class="var type1" id="S2T1U12">D</span>)</span> == <span class="mxinfo " id="T3:U6">4</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">    <span class="keyword">for</span> <span class="var type0" id="S4T0U16">ii</span> = 1:size(<span class="var type0" id="S2T0U21">D</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">        <span class="keyword">for</span> <span class="var type0" id="S6T0U25">jj</span> = 1:size(<span class="var type0" id="S2T0U30">D</span>,2)</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">            <span class="var type0" id="S2T0U35">D</span>(<span class="var type0" id="S4T0U36">ii</span>,<span class="var type0" id="S6T0U37">jj</span>,:,:) = squeeze(<span class="var type0" id="S2T0U44">D</span>(<span class="var type0" id="S4T0U45">ii</span>,<span class="var type0" id="S6T0U46">jj</span>,:,:))^2;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T2:U7"><span class="mxinfo " id="T3:U8">ndims(<span class="var type1" id="S2T1U54">D</span>)</span> == <span class="mxinfo " id="T3:U10">5</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S4T3U58">ii</span> = <span class="mxinfo " id="T3:U12">1</span>:size(<span class="var type1" id="S2T1U63">D</span>,1)</span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13">13</a></span><span class="line">        <span class="keyword">for</span> <span class="var type1" id="S6T3U67">jj</span> = <span class="mxinfo " id="T3:U15">1</span>:size(<span class="var type1" id="S2T1U72">D</span>,2)</span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14">14</a></span><span class="line">            <span class="keyword">for</span> <span class="var type1" id="S8T3U76">kk</span> = <span class="mxinfo " id="T3:U18">1</span>:size(<span class="var type1" id="S2T1U81">D</span>,3)</span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15">15</a></span><span class="line">                <span class="mxinfo " id="T4:U20"><span class="mxinfo " id="T4:U21"><span class="var type1" id="S2T1U86">D</span>(<span class="var type1" id="S4T3U87">ii</span>,<span class="var type1" id="S6T3U88">jj</span>,<span class="var type1" id="S8T3U89">kk</span>,<span class="mxinfo " id="T5:U26">:</span>,<span class="mxinfo " id="T5:U27">:</span>)</span> = <span class="mxinfo " id="T6:U28"><span class="mxinfo " id="T6:U29">squeeze(<span class="mxinfo " id="T4:U30"><span class="var type1" id="S2T1U96">D</span>(<span class="var type1" id="S4T3U97">ii</span>,<span class="var type1" id="S6T3U98">jj</span>,<span class="var type1" id="S8T3U99">kk</span>,<span class="mxinfo " id="T5:U35">:</span>,<span class="mxinfo " id="T5:U36">:</span>)</span>)</span>^2</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16">16</a></span><span class="line">            <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17">17</a></span><span class="line">        <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19">19</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20">20</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21">21</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22">22</a></span><span class="line"></span></span>
</pre>
