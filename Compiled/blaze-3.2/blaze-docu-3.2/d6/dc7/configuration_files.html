<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Configuration Files</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Configuration Files </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#transpose_flag">Default Vector Storage</a></li>
<li class="level1"><a href="#storage_order">Default Matrix Storage</a></li>
<li class="level1"><a href="#blas_mode">BLAS Mode</a></li>
<li class="level1"><a href="#cache_size">Cache Size</a></li>
<li class="level1"><a href="#vectorization">Vectorization</a></li>
<li class="level1"><a href="#thresholds">Thresholds</a></li>
<li class="level1"><a href="#padding">Padding</a></li>
<li class="level1"><a href="#streaming">Streaming (Non-Temporal Stores)</a></li>
</ul>
</div>
<div class="textblock"><p>Sometimes it is necessary to adapt <b>Blaze</b> to specific requirements. For this purpose <b>Blaze</b> provides several configuration files in the <code>./blaze/config/</code> subdirectory, which provide ample opportunity to customize internal settings, behavior, and thresholds. This chapter explains the most important of these configuration files. For a complete overview of all customization opportunities, please go to the configuration files in the <code>./blaze/config/</code> subdirectory or see the complete <b>Blaze</b> documentation.</p>
<p><br />
 </p>
<h1><a class="anchor" id="transpose_flag"></a>
Default Vector Storage</h1>
<hr/>
<p>The <b>Blaze</b> default is that all vectors are created as column vectors (if not specified explicitly):</p>
<div class="fragment"><div class="line"><a class="code" href="../../d9/d3c/classblaze_1_1StaticVector.html">blaze::StaticVector&lt;double,3UL&gt;</a> x;  <span class="comment">// Creates a 3-dimensional static column vector</span></div></div><!-- fragment --><p>The header file <code>./blaze/config/TransposeFlag.h</code> allows the configuration of the default vector storage (i.e. the default transpose flag) of all vectors within the <b>Blaze</b> library. The default transpose flag is specified via the <code>BLAZE_DEFAULT_TRANSPOSE_FLAG</code> macro:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_DEFAULT_TRANSPOSE_FLAG blaze::columnVector</span></div></div><!-- fragment --><p>Alternatively the default transpose flag can be specified via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_DEFAULT_TRANSPOSE_FLAG blaze::columnVector</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>Valid settings for <code>BLAZE_DEFAULT_TRANSPOSE_FLAG</code> are <a class="el" href="../../d2/de9/namespaceblaze.html#a006b6328815f2632d2c5ab8b869c5cf0" title="Transpose flag for row vectors. ">blaze::rowVector</a> and <a class="el" href="../../d2/de9/namespaceblaze.html#acee466faebcaba59afde0fbfe22041aa" title="Transpose flag for column vectors. ">blaze::columnVector</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="storage_order"></a>
Default Matrix Storage</h1>
<hr/>
<p>Matrices are by default created as row-major matrices:</p>
<div class="fragment"><div class="line"><a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix&lt;double,3UL,3UL&gt;</a>  A;  <span class="comment">// Creates a 3x3 row-major matrix</span></div></div><!-- fragment --><p>The header file <code>./blaze/config/StorageOrder.h</code> allows the configuration of the default matrix storage order. Via the <code>BLAZE_DEFAULT_STORAGE_ORDER</code> macro the default storage order for all matrices of the <b>Blaze</b> library can be specified.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_DEFAULT_STORAGE_ORDER blaze::rowMajor</span></div></div><!-- fragment --><p>Alternatively the default storage order can be specified via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_DEFAULT_STORAGE_ORDER blaze::rowMajor</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>Valid settings for <code>BLAZE_DEFAULT_STORAGE_ORDER</code> are <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a> and <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="blas_mode"></a>
BLAS Mode</h1>
<hr/>
<p>In order to achieve maximum performance for multiplications with dense matrices, <b>Blaze</b> can be configured to use a BLAS library. Via the following compilation switch in the configuration file <code>./blaze/config/BLAS.h</code> BLAS can be enabled:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_BLAS_MODE 1</span></div></div><!-- fragment --><p>In case the selected BLAS library provides parallel execution, the <code>BLAZE_BLAS_IS_PARALLEL</code> switch should be activated to prevent <b>Blaze</b> from parallelizing on its own:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_BLAS_IS_PARALLEL 1</span></div></div><!-- fragment --><p>Alternatively, both settings can be specified via command line or by defining the symbols manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_BLAS_MODE 1</span></div><div class="line"><span class="preprocessor">#define BLAZE_BLAS_IS_PARALLEL 1</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>In case no BLAS library is available, <b>Blaze</b> will still work and will not be reduced in functionality, but performance may be limited.</p>
<p><br />
 </p>
<h1><a class="anchor" id="cache_size"></a>
Cache Size</h1>
<hr/>
<p>The optimization of several <b>Blaze</b> compute kernels depends on the cache size of the target architecture. By default, <b>Blaze</b> assumes a cache size of 3 MiByte. However, for optimal speed the exact cache size of the system should be provided via the <code>cacheSize</code> value in the <code>./blaze/config/CacheSize.h</code> configuration file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_CACHE_SIZE 3145728UL;</span></div></div><!-- fragment --><p>The cache size can also be specified via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_CACHE_SIZE 3145728UL</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="vectorization"></a>
Vectorization</h1>
<hr/>
<p>In order to achieve maximum performance and to exploit the compute power of a target platform the <b>Blaze</b> library attempts to vectorize all linear algebra operations by SSE, AVX, and/or AVX-512 intrinsics, depending on which instruction set is available. However, it is possible to disable the vectorization entirely by the compile time switch in the configuration file <code>./blaze/config/Vectorization.h</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_VECTORIZATION 1</span></div></div><!-- fragment --><p>It is also possible to (de-)activate vectorization via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_VECTORIZATION 1</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>In case the switch is set to 1, vectorization is enabled and the <b>Blaze</b> library is allowed to use intrinsics to speed up computations. In case the switch is set to 0, vectorization is disabled entirely and the <b>Blaze</b> library chooses default, non-vectorized functionality for the operations. Note that deactivating the vectorization may pose a severe performance limitation for a large number of operations!</p>
<p><br />
 </p>
<h1><a class="anchor" id="thresholds"></a>
Thresholds</h1>
<hr/>
<p>For many computations <b>Blaze</b> distinguishes between small and large vectors and matrices. This separation is especially important for the parallel execution of computations, since the use of several threads only pays off for sufficiently large vectors and matrices. Additionally, it also enables <b>Blaze</b> to select kernels that are optimized for a specific size.</p>
<p>In order to distinguish between small and large data structures <b>Blaze</b> provides several thresholds that can be adapted to the characteristics of the target platform. For instance, the <code>DMATDVECMULT_THRESHOLD</code> specifies the threshold between the application of the custom <b>Blaze</b> kernels for small dense matrix/dense vector multiplications and the BLAS kernels for large multiplications. All thresholds, including the thresholds for the OpenMP- and thread-based parallelization, are contained within the configuration file <code>./blaze/config/Thresholds.h</code>.</p>
<p><br />
 </p>
<h1><a class="anchor" id="padding"></a>
Padding</h1>
<hr/>
<p>By default the <b>Blaze</b> library uses padding for all dense vectors and matrices in order to achieve maximum performance in all operations. Due to padding, the proper alignment of data elements can be guaranteed and the need for remainder loops is minimized. However, on the downside padding introduces an additional memory overhead, which can be large depending on the used data type.</p>
<p>The configuration file <code>./blaze/config/Optimizations.h</code> provides a compile time switch that can be used to (de-)activate padding:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_PADDING 1</span></div></div><!-- fragment --><p>Alternatively it is possible to (de-)activate padding via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_PADDING 1</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>If <code>BLAZE_USE_PADDING</code> is set to 1 padding is enabled for all dense vectors and matrices, if it is set to 0 padding is disabled. Note however that disabling padding can considerably reduce the performance of all dense vector and matrix operations!</p>
<p><br />
 </p>
<h1><a class="anchor" id="streaming"></a>
Streaming (Non-Temporal Stores)</h1>
<hr/>
<p>For vectors and matrices that don't fit into the cache anymore non-temporal stores can provide a significant performance advantage of about 20%. However, this advantage is only in effect in case the memory bandwidth of the target architecture is maxed out. If the target architecture's memory bandwidth cannot be exhausted the use of non-temporal stores can decrease performance instead of increasing it.</p>
<p>The configuration file <code>./blaze/config/Optimizations.h</code> provides a compile time switch that can be used to (de-)activate streaming:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_STREAMING 1</span></div></div><!-- fragment --><p>Alternatively streaming can be (de-)activated via command line or by defining this symbol manually before including any <b>Blaze</b> header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define BLAZE_USE_STREAMING 1</span></div><div class="line"><span class="preprocessor">#include &lt;blaze/Blaze.h&gt;</span></div></div><!-- fragment --><p>If <code>BLAZE_USE_STREAMING</code> is set to 1 streaming is enabled, if it is set to 0 streaming is disabled. It is recommended to consult the target architecture's white papers to decide whether streaming is beneficial or hurtful for performance.</p>
<p><br />
 Previous: <a class="el" href="../../d4/dfc/customization.html">Customization</a> &#160; &#160; Next: <a class="el" href="../../d4/de4/vector_and_matrix_customization.html">Customization of Vectors and Matrices</a> <br />
</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 05:50:23 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
