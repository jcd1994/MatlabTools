<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Subvectors</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Subvectors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#views_subvectors_class">The Subvector Class Template</a></li>
<li class="level1"><a href="#views_subvectors_setup">Setup of Subvectors</a></li>
<li class="level1"><a href="#views_subvectors_common_operations">Common Operations</a></li>
<li class="level1"><a href="#views_subvectors_element_access">Element Access</a></li>
<li class="level1"><a href="#views_subvectors_element_insertion">Element Insertion</a></li>
<li class="level1"><a href="#views_subvectors_arithmetic_operations">Arithmetic Operations</a></li>
<li class="level1"><a href="#views_aligned_subvectors">Aligned Subvectors</a></li>
<li class="level1"><a href="#views_subvectors_on_subvectors">Subvectors on Subvectors</a></li>
</ul>
</div>
<div class="textblock"><p>Subvectors provide views on a specific part of a dense or sparse vector. As such, subvectors act as a reference to a specific range within a vector. This reference is valid and can be used in every way any other dense or sparse vector can be used as long as the vector containing the subvector is not resized or entirely destroyed. The subvector also acts as an alias to the vector elements in the specified range: Changes made to the elements (e.g. modifying values, inserting or erasing elements) are immediately visible in the vector and changes made via the vector are immediately visible in the subvector.</p>
<p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_class"></a>
The Subvector Class Template</h1>
<hr/>
<p>The <a class="el" href="../../d4/dd2/classblaze_1_1Subvector.html" title="View on a specific subvector of a dense or sparse vector.The Subvector class template represents a vi...">blaze::Subvector</a> class template represents a view on a specific subvector of a dense or sparse vector primitive. It can be included via the header file</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d9/da8/Subvector_8h.html">blaze/math/Subvector.h</a>&gt;</span></div></div><!-- fragment --><p>The type of the vector is specified via two template parameters:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> VT, <span class="keywordtype">bool</span> AF &gt;</div><div class="line"><span class="keyword">class </span>Subvector;</div></div><!-- fragment --><ul>
<li><code>VT:</code> specifies the type of the vector primitive. Subvector can be used with every vector primitive or view, but does not work with any vector expression type.</li>
<li><code>AF:</code> the alignment flag specifies whether the subvector is aligned (<a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a>) or unaligned (<a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a>). The default value is <a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a>.</li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_setup"></a>
Setup of Subvectors</h1>
<hr/>
<p>A view on a dense or sparse subvector can be created very conveniently via the <code><a class="el" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997" title="Creating a view on a specific subvector of the given vector. ">subvector()</a></code> function. This view can be treated as any other vector, i.e. it can be assigned to, it can be copied from, and it can be used in arithmetic operations. A subvector created from a row vector can be used as any other row vector, a subvector created from a column vector can be used as any other column vector. The view can also be used on both sides of an assignment: The subvector can either be used as an alias to grant write access to a specific subvector of a vector primitive on the left-hand side of an assignment or to grant read-access to a specific subvector of a vector primitive or expression on the right-hand side of an assignment. The following example demonstrates this in detail:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,blaze::rowVector&gt;</a>  DenseVectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;int,blaze::rowVector&gt;</a>  SparseVectorType;</div><div class="line"></div><div class="line">DenseVectorType  d1, d2;</div><div class="line">SparseVectorType s1, s2;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the first ten elements of the dense vector d1</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType&gt;</a> dsv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 0UL, 10UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the second ten elements of the sparse vector s1</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;SparseVectorType&gt;</a> ssv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( s1, 10UL, 10UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the addition of d2 and s2</span></div><div class="line">dsv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d2 + s2, 5UL, 10UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the multiplication of d2 and s2</span></div><div class="line">ssv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d2 * s2, 2UL, 10UL );</div></div><!-- fragment --><p>The <code><a class="el" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997" title="Creating a view on a specific subvector of the given vector. ">subvector()</a></code> function can be used on any dense or sparse vector, including expressions, as demonstrated in the example. Note however that a <a class="el" href="../../d4/dd2/classblaze_1_1Subvector.html" title="View on a specific subvector of a dense or sparse vector.The Subvector class template represents a vi...">blaze::Subvector</a> can only be instantiated with a dense or sparse vector primitive, i.e. with types that can be written, and not with an expression type.</p>
<p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_common_operations"></a>
Common Operations</h1>
<hr/>
<p>A subvector view can be used like any other dense or sparse vector. For instance, the current number of elements can be obtained via the <code><a class="el" href="../../dc/dcf/group__vector.html#gab5a3d85c96e5ec1481fe48cd80e663a0" title="Returns the current size/dimension of the vector. ">size()</a></code> function, the current capacity via the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga41e8f2c5d0de752c667be20765570e56" title="Returns the maximum capacity of the matrix. ">capacity()</a></code> function, and the number of non-zero elements via the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga2f34f7e65e4d2be9617f824285073923" title="Returns the total number of non-zero elements in the matrix. ">nonZeros()</a></code> function. However, since subvectors are references to a specific range of a vector, several operations are not possible on views, such as resizing and swapping. The following example shows this by means of a dense subvector view:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;int,blaze::rowVector&gt;</a>  VectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a>                SubvectorType;</div><div class="line"></div><div class="line">VectorType v( 42UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the range [5..15] of vector v</span></div><div class="line">SubvectorType sv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 5UL, 10UL );</div><div class="line"></div><div class="line">sv.size();          <span class="comment">// Returns the number of elements in the subvector</span></div><div class="line">sv.capacity();      <span class="comment">// Returns the capacity of the subvector</span></div><div class="line">sv.nonZeros();      <span class="comment">// Returns the number of non-zero elements contained in the subvector</span></div><div class="line"></div><div class="line">sv.resize( 84UL );  <span class="comment">// Compilation error: Cannot resize a subvector of a vector</span></div><div class="line"></div><div class="line">SubvectorType sv2 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 15UL, 10UL );</div><div class="line"><a class="code" href="../../d0/d6e/group__compressed__matrix.html#ga72c078b1444dca25e2239357085649c3">swap</a>( sv, sv2 );   <span class="comment">// Compilation error: Swap operation not allowed</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_element_access"></a>
Element Access</h1>
<hr/>
<p>The elements of a subvector can be directly accessed via the subscript operator:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,blaze::rowVector&gt;</a>  VectorType;</div><div class="line">VectorType v;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating an 8-dimensional subvector, starting from index 4</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a> sv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 4UL, 8UL );</div><div class="line"></div><div class="line"><span class="comment">// Setting the 1st element of the subvector, which corresponds to</span></div><div class="line"><span class="comment">// the element at index 5 in vector v</span></div><div class="line">sv[1] = 2.0;</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;double,blaze::rowVector&gt;</a>  VectorType;</div><div class="line">VectorType v;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating an 8-dimensional subvector, starting from index 4</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a> sv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 4UL, 8UL );</div><div class="line"></div><div class="line"><span class="comment">// Setting the 1st element of the subvector, which corresponds to</span></div><div class="line"><span class="comment">// the element at index 5 in vector v</span></div><div class="line">sv[1] = 2.0;</div></div><!-- fragment --><p>The numbering of the subvector elements is</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\left(\begin{array}{*{5}{c}} 0 &amp; 1 &amp; 2 &amp; \cdots &amp; N-1 \\ \end{array}\right),\]" src="../../form_172.png"/>
</p>
<p>where N is the specified size of the subvector. Alternatively, the elements of a subvector can be traversed via iterators. Just as with vectors, in case of non-const subvectors, <code><a class="el" href="../../dd/d7a/group__matrix.html#ga8f0c048c86b644d1b9be16edc43d1b99" title="Returns an iterator to the first element of row/column i. ">begin()</a></code> and <code><a class="el" href="../../dd/d7a/group__matrix.html#ga7fdc81bb7ed1970229a4f29afebfd7a6" title="Returns an iterator just past the last element of row/column i. ">end()</a></code> return an Iterator, which allows a manipulation of the non-zero values, in case of constant subvectors a ConstIterator is returned:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;int,blaze::rowVector&gt;</a>  VectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a>                SubvectorType;</div><div class="line"></div><div class="line">VectorType v( 256UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a reference to a specific subvector of the dense vector v</span></div><div class="line">SubvectorType sv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 16UL, 64UL );</div><div class="line"></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a8edd0302e146f39097a411783a7214f5">SubvectorType::Iterator</a> it=sv.begin(); it!=sv.end(); ++it ) {</div><div class="line">   *it = ...;  <span class="comment">// OK: Write access to the dense subvector value.</span></div><div class="line">   ... = *it;  <span class="comment">// OK: Read access to the dense subvector value.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a67e310139c2b875a90b3bfe6ba36a441">SubvectorType::ConstIterator</a> it=sv.begin(); it!=sv.end(); ++it ) {</div><div class="line">   *it = ...;  <span class="comment">// Compilation error: Assignment to the value via a ConstIterator is invalid.</span></div><div class="line">   ... = *it;  <span class="comment">// OK: Read access to the dense subvector value.</span></div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;int,blaze::rowVector&gt;</a>  VectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a>                   SubvectorType;</div><div class="line"></div><div class="line">VectorType v( 256UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a reference to a specific subvector of the sparse vector v</span></div><div class="line">SubvectorType sv = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 16UL, 64UL );</div><div class="line"></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a8edd0302e146f39097a411783a7214f5">SubvectorType::Iterator</a> it=sv.begin(); it!=sv.end(); ++it ) {</div><div class="line">   it-&gt;value() = ...;  <span class="comment">// OK: Write access to the value of the non-zero element.</span></div><div class="line">   ... = it-&gt;value();  <span class="comment">// OK: Read access to the value of the non-zero element.</span></div><div class="line">   it-&gt;index() = ...;  <span class="comment">// Compilation error: The index of a non-zero element cannot be changed.</span></div><div class="line">   ... = it-&gt;index();  <span class="comment">// OK: Read access to the index of the sparse element.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a67e310139c2b875a90b3bfe6ba36a441">SubvectorType::ConstIterator</a> it=sv.begin(); it!=sv.end(); ++it ) {</div><div class="line">   it-&gt;value() = ...;  <span class="comment">// Compilation error: Assignment to the value via a ConstIterator is invalid.</span></div><div class="line">   ... = it-&gt;value();  <span class="comment">// OK: Read access to the value of the non-zero element.</span></div><div class="line">   it-&gt;index() = ...;  <span class="comment">// Compilation error: The index of a non-zero element cannot be changed.</span></div><div class="line">   ... = it-&gt;index();  <span class="comment">// OK: Read access to the index of the sparse element.</span></div><div class="line">}</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_element_insertion"></a>
Element Insertion</h1>
<hr/>
<p>Inserting/accessing elements in a sparse subvector can be done by several alternative functions. The following example demonstrates all options:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;double,blaze::rowVector&gt;</a>  VectorType;</div><div class="line">VectorType v( 256UL );  <span class="comment">// Non-initialized vector of size 256</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a>  SubvectorType;</div><div class="line">SubvectorType sv( <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( v, 10UL, 60UL ) );  <span class="comment">// View on the range [10..69] of v</span></div><div class="line"></div><div class="line"><span class="comment">// The subscript operator provides access to all possible elements of the sparse subvector,</span></div><div class="line"><span class="comment">// including the zero elements. In case the subscript operator is used to access an element</span></div><div class="line"><span class="comment">// that is currently not stored in the sparse subvector, the element is inserted into the</span></div><div class="line"><span class="comment">// subvector.</span></div><div class="line">sv[42] = 2.0;</div><div class="line"></div><div class="line"><span class="comment">// The second operation for inserting elements is the set() function. In case the element</span></div><div class="line"><span class="comment">// is not contained in the vector it is inserted into the vector, if it is already contained</span></div><div class="line"><span class="comment">// in the vector its value is modified.</span></div><div class="line">sv.set( 45UL, -1.2 );</div><div class="line"></div><div class="line"><span class="comment">// An alternative for inserting elements into the subvector is the insert() function. However,</span></div><div class="line"><span class="comment">// it inserts the element only in case the element is not already contained in the subvector.</span></div><div class="line">sv.insert( 50UL, 3.7 );</div><div class="line"></div><div class="line"><span class="comment">// Just as in case of vectors, elements can also be inserted via the append() function. In</span></div><div class="line"><span class="comment">// case of subvectors, append() also requires that the appended element&#39;s index is strictly</span></div><div class="line"><span class="comment">// larger than the currently largest non-zero index of the subvector and that the subvector&#39;s</span></div><div class="line"><span class="comment">// capacity is large enough to hold the new element. Note however that due to the nature of</span></div><div class="line"><span class="comment">// a subvector, which may be an alias to the middle of a sparse vector, the append() function</span></div><div class="line"><span class="comment">// does not work as efficiently for a subvector as it does for a vector.</span></div><div class="line">sv.reserve( 10UL );</div><div class="line">sv.append( 51UL, -2.1 );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_arithmetic_operations"></a>
Arithmetic Operations</h1>
<hr/>
<p>Both dense and sparse subvectors can be used in all arithmetic operations that any other dense or sparse vector can be used in. The following example gives an impression of the use of dense subvectors within arithmetic operations. All operations (addition, subtraction, multiplication, scaling, ...) can be performed on all possible combinations of dense and sparse subvectors with fitting element types:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,blaze::rowVector&gt;</a>     DenseVectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;double,blaze::rowVector&gt;</a>  SparseVectorType;</div><div class="line">DenseVectorType d1, d2, d3;</div><div class="line">SparseVectorType s1, s2;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>  DenseMatrixType;</div><div class="line">DenseMatrixType A;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType&gt;</a>  SubvectorType;</div><div class="line">SubvectorType dsv( <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 0UL, 10UL ) );  <span class="comment">// View on the range [0..9] of vector d1</span></div><div class="line"></div><div class="line">dsv = d2;                          <span class="comment">// Dense vector initialization of the range [0..9]</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 10UL, 10UL ) = s1;  <span class="comment">// Sparse vector initialization of the range [10..19]</span></div><div class="line"></div><div class="line">d3 = dsv + d2;                           <span class="comment">// Dense vector/dense vector addition</span></div><div class="line">s2 = s1 + <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 10UL, 10UL );   <span class="comment">// Sparse vector/dense vector addition</span></div><div class="line">d2 = dsv * <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 20UL, 10UL );  <span class="comment">// Component-wise vector multiplication</span></div><div class="line"></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 3UL, 4UL ) *= 2.0;      <span class="comment">// In-place scaling of the range [3..6]</span></div><div class="line">d2 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 7UL, 3UL ) * 2.0;  <span class="comment">// Scaling of the range [7..9]</span></div><div class="line">d2 = 2.0 * <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 7UL, 3UL );  <span class="comment">// Scaling of the range [7..9]</span></div><div class="line"></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 0UL , 10UL ) += d2;   <span class="comment">// Addition assignment</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 10UL, 10UL ) -= s2;   <span class="comment">// Subtraction assignment</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 20UL, 10UL ) *= dsv;  <span class="comment">// Multiplication assignment</span></div><div class="line"></div><div class="line"><span class="keywordtype">double</span> scalar = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 5UL, 10UL ) * <a class="code" href="../../db/df0/group__dense__matrix.html#ga89e370b7fc394ce8cbb51b0114509b08">trans</a>( s1 );  <span class="comment">// Scalar/dot/inner product between two vectors</span></div><div class="line"></div><div class="line">A = <a class="code" href="../../db/df0/group__dense__matrix.html#ga89e370b7fc394ce8cbb51b0114509b08">trans</a>( s1 ) * <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 4UL, 16UL );  <span class="comment">// Outer product between two vectors</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="views_aligned_subvectors"></a>
Aligned Subvectors</h1>
<hr/>
<p>Usually subvectors can be defined anywhere within a vector. They may start at any position and may have an arbitrary size (only restricted by the size of the underlying vector). However, in contrast to vectors themselves, which are always properly aligned in memory and therefore can provide maximum performance, this means that subvectors in general have to be considered to be unaligned. This can be made explicit by the <a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a> flag:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177">blaze::unaligned</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,blaze::rowVector&gt;</a>  DenseVectorType;</div><div class="line"></div><div class="line">DenseVectorType x;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Identical creations of an unaligned subvector in the range [8..23]</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType&gt;</a>           sv1 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>           ( x, 8UL, 16UL );</div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType&gt;</a>           sv2 = subvector&lt;unaligned&gt;( x, 8UL, 16UL );</div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType,unaligned&gt;</a> sv3 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>           ( x, 8UL, 16UL );</div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType,unaligned&gt;</a> sv4 = subvector&lt;unaligned&gt;( x, 8UL, 16UL );</div></div><!-- fragment --><p>All of these calls to the <code><a class="el" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997" title="Creating a view on a specific subvector of the given vector. ">subvector()</a></code> function are identical. Whether the alignment flag is explicitly specified or not, it always returns an unaligned subvector. Whereas this may provide full flexibility in the creation of subvectors, this might result in performance disadvantages in comparison to vector primitives (even in case the specified subvector could be aligned). Whereas vector primitives are guaranteed to be properly aligned and therefore provide maximum performance in all operations, a general view on a vector might not be properly aligned. This may cause a performance penalty on some platforms and/or for some operations.</p>
<p>However, it is also possible to create aligned subvectors. Aligned subvectors are identical to unaligned subvectors in all aspects, except that they may pose additional alignment restrictions and therefore have less flexibility during creation, but don't suffer from performance penalties and provide the same performance as the underlying vector. Aligned subvectors are created by explicitly specifying the <a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a> flag:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7">blaze::aligned</a>;</div><div class="line"></div><div class="line"><span class="comment">// Creating an aligned dense subvector in the range [8..23]</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;DenseVectorType,aligned&gt;</a> sv = subvector&lt;aligned&gt;( x, 8UL, 16UL );</div></div><!-- fragment --><p>The alignment restrictions refer to system dependent address restrictions for the used element type and the available vectorization mode (SSE, AVX, ...). In order to be properly aligned the first element of the subvector must be aligned. The following source code gives some examples for a double precision dynamic vector, assuming that AVX is available, which packs 4 <code>double</code> values into a SIMD vector:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7">blaze::aligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#acee466faebcaba59afde0fbfe22041aa">blaze::columnVector</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,columnVector&gt;</a>  VectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType,aligned&gt;</a>  SubvectorType;</div><div class="line"></div><div class="line">VectorType d( 17UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// OK: Starts at the beginning, i.e. the first element is aligned</span></div><div class="line">SubvectorType dsv1 = subvector&lt;aligned&gt;( d, 0UL, 13UL );</div><div class="line"></div><div class="line"><span class="comment">// OK: Start index is a multiple of 4, i.e. the first element is aligned</span></div><div class="line">SubvectorType dsv2 = subvector&lt;aligned&gt;( d, 4UL, 7UL );</div><div class="line"></div><div class="line"><span class="comment">// OK: The start index is a multiple of 4 and the subvector includes the last element</span></div><div class="line">SubvectorType dsv3 = subvector&lt;aligned&gt;( d, 8UL, 9UL );</div><div class="line"></div><div class="line"><span class="comment">// Error: Start index is not a multiple of 4, i.e. the first element is not aligned</span></div><div class="line">SubvectorType dsv4 = subvector&lt;aligned&gt;( d, 5UL, 8UL );</div></div><!-- fragment --><p>Note that the discussed alignment restrictions are only valid for aligned dense subvectors. In contrast, aligned sparse subvectors at this time don't pose any additional restrictions. Therefore aligned and unaligned sparse subvectors are truly fully identical. Still, in case the <a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a> flag is specified during setup, an aligned subvector is created:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7">blaze::aligned</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;double,blaze::rowVector&gt;</a>  SparseVectorType;</div><div class="line"></div><div class="line">SparseVectorType x;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating an aligned subvector in the range [8..23]</span></div><div class="line"><a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;SparseVectorType,aligned&gt;</a> sv = subvector&lt;aligned&gt;( x, 8UL, 16UL );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="views_subvectors_on_subvectors"></a>
Subvectors on Subvectors</h1>
<hr/>
<p>It is also possible to create a subvector view on another subvector. In this context it is important to remember that the type returned by the <code><a class="el" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997" title="Creating a view on a specific subvector of the given vector. ">subvector()</a></code> function is the same type as the type of the given subvector, not a nested subvector type, since the view on a subvector is just another view on the underlying vector:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector&lt;double,blaze::rowVector&gt;</a>  VectorType;</div><div class="line"><span class="keyword">typedef</span> <a class="code" href="../../d4/dd2/classblaze_1_1Subvector.html">blaze::Subvector&lt;VectorType&gt;</a>                   SubvectorType;</div><div class="line"></div><div class="line">VectorType d1;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a subvector view on the dense vector d1</span></div><div class="line">SubvectorType sv1 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( d1, 5UL, 10UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a subvector view on the dense subvector sv1</span></div><div class="line">SubvectorType sv2 = <a class="code" href="../../d0/d48/group__views.html#ga5fa8010ff76a4d351cd7b3016f4d3997">subvector</a>( sv1, 1UL, 5UL );</div></div><!-- fragment --><p><br />
 Previous: <a class="el" href="../../d2/d1b/views.html">Views</a> &#160; &#160; Next: <a class="el" href="../../db/dd6/views_submatrices.html">Submatrices</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 05:50:23 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
