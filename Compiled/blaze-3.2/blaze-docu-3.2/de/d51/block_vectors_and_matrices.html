<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Block Vectors and Matrices</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Block Vectors and Matrices </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#block_vectors_and_matrices_general">General Concepts</a></li>
<li class="level1"><a href="#block_vectors_and_matrices_pitfalls">Pitfalls</a></li>
<li class="level1"><a href="#block_vectors_and_matrices_example">Example</a></li>
</ul>
</div>
<div class="textblock"><p><br />
 </p>
<h1><a class="anchor" id="block_vectors_and_matrices_general"></a>
General Concepts</h1>
<hr/>
<p>In addition to fundamental element types, the <b>Blaze</b> library supports vectors and matrices with non-fundamental element type. For instance, it is possible to define block matrices by using a matrix type as the element type:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#acee466faebcaba59afde0fbfe22041aa">blaze::columnVector</a>;</div><div class="line"></div><div class="line">DynamicMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt;, <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">rowMajor</a> &gt; A;</div><div class="line">DynamicVector&lt; DynamicVector&lt;double,columnVector &gt;, <a class="code" href="../../d2/de9/namespaceblaze.html#acee466faebcaba59afde0fbfe22041aa">columnVector</a> &gt; x, y;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line">y = A * x;</div></div><!-- fragment --><p>The matrix/vector multiplication in this example runs fully parallel and uses vectorization for every inner matrix/vector multiplication and vector addition.</p>
<p><br />
 </p>
<h1><a class="anchor" id="block_vectors_and_matrices_pitfalls"></a>
Pitfalls</h1>
<hr/>
<p>The only thing to keep in mind when using non-fundamental element types is that all operations between the elements have to be well defined. More specifically, the size of vector and matrix elements has to match. The attempt to combine two non-matching elements results in either a compilation error (in case of statically sized elements) or an exception (for dynamically sized elements):</p>
<div class="fragment"><div class="line">DynamicVector&lt; StaticVector&lt;int,2UL&gt; &gt; a;</div><div class="line">DynamicVector&lt; StaticVector&lt;int,3UL&gt; &gt; b;</div><div class="line"></div><div class="line">DynamicVector&lt; DynamicVector&lt;int&gt; &gt; c( a + b );  <span class="comment">// Compilation error: element size doesn&#39;t match</span></div></div><!-- fragment --><p>Therefore please don't forget that dynamically sized elements (e.g. <code><a class="el" href="../../da/d9e/classblaze_1_1DynamicVector.html" title="Efficient implementation of an arbitrary sized vector.The DynamicVector class template is the represe...">blaze::DynamicVector</a></code>, <code><a class="el" href="../../da/d6b/classblaze_1_1HybridVector.html" title="Efficient implementation of a dynamically sized vector with static memory.The HybridVector class temp...">blaze::HybridVector</a></code>, <code><a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">blaze::DynamicMatrix</a></code>, <code><a class="el" href="../../d6/d60/classblaze_1_1HybridMatrix.html" title="Efficient implementation of a dynamically sized matrix with static memory.The HybridMatrix class temp...">blaze::HybridMatrix</a></code>, ...) need to be sized accordingly upfront.</p>
<p><br />
 </p>
<h1><a class="anchor" id="block_vectors_and_matrices_example"></a>
Example</h1>
<hr/>
<p>The following example demonstrates a complete multiplication between a statically sized block matrix and block vector:</p>
<div class="fragment"><div class="line"><span class="comment">// ( ( 1 1 )  ( 2 2 ) )   ( ( 1 ) )   ( ( 10 ) )</span></div><div class="line"><span class="comment">// ( ( 1 1 )  ( 2 2 ) )   ( ( 1 ) )   ( ( 10 ) )</span></div><div class="line"><span class="comment">// (                  ) * (       ) = (        )</span></div><div class="line"><span class="comment">// ( ( 3 3 )  ( 4 4 ) )   ( ( 2 ) )   ( ( 22 ) )</span></div><div class="line"><span class="comment">// ( ( 3 3 )  ( 4 4 ) )   ( ( 2 ) )   ( ( 22 ) )</span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> StaticMatrix&lt;int,2UL,2UL,rowMajor&gt; M2x2;</div><div class="line"><span class="keyword">typedef</span> StaticVector&lt;int,2UL,columnVector&gt; V2;</div><div class="line"></div><div class="line">DynamicMatrix&lt;M2x2,rowMajor&gt; A{ { M2x2(1), M2x2(2) }</div><div class="line">                                { M2x2(3), M2x2(4) } };</div><div class="line"></div><div class="line">DynamicVector&lt;V2,columnVector&gt; x{ V2(1), V2(2) };</div><div class="line"></div><div class="line">DynamicVector&lt;V2,columnVector&gt; y( A * x );</div></div><!-- fragment --><p><br />
 Previous: <a class="el" href="../../d9/d33/lapack_functions.html">LAPACK Functions</a> &#160; &#160; Next: <a class="el" href="../../d2/dcb/intra_statement_optimization.html">Intra-Statement Optimization</a> <br />
</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 05:50:23 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
