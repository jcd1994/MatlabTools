<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>blaze::UpperMatrix&lt; MT, SO, DF &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d2/de9/namespaceblaze.html">blaze</a></li><li class="navelem"><a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html">UpperMatrix</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">blaze::UpperMatrix&lt; MT, SO, DF &gt; Class Template Reference<div class="ingroups"><a class="el" href="../../de/df1/group__math.html">Math module</a> &raquo; <a class="el" href="../../d3/d7d/group__adaptors.html">Adaptors</a> &raquo; <a class="el" href="../../d3/d2e/group__upper__matrix.html">UpperMatrix</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d0/d5c/structblaze_1_1Matrix.html" title="Base class for matrices.The Matrix class is a base class for all dense and sparse matrix classes with...">Matrix</a> adapter for upper triangular <img class="formulaInl" alt="$ N \times N $" src="../../form_18.png"/> matrices.  
 <a href="../../d5/daf/classblaze_1_1UpperMatrix.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d2/d17/adaptors_2uppermatrix_2BaseTemplate_8h_source.html">BaseTemplate.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MT, bool SO = StorageOrder&lt;MT&gt;::value, bool DF = IsDenseMatrix&lt;MT&gt;::value&gt;<br />
class blaze::UpperMatrix&lt; MT, SO, DF &gt;</h3>

<p><a class="el" href="../../d0/d5c/structblaze_1_1Matrix.html" title="Base class for matrices.The Matrix class is a base class for all dense and sparse matrix classes with...">Matrix</a> adapter for upper triangular <img class="formulaInl" alt="$ N \times N $" src="../../form_18.png"/> matrices. </p>
<h1><a class="anchor" id="uppermatrix_general"></a>
General</h1>
<p>The <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> class template is an adapter for existing dense and sparse matrix types. It inherits the properties and the interface of the given matrix type <em>MT</em> and extends it by enforcing the additional invariant that all matrix elements below the diagonal are 0 (upper triangular matrix). The type of the adapted matrix can be specified via the first template parameter:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> MT, <span class="keywordtype">bool</span> SO, <span class="keywordtype">bool</span> DF &gt;</div><div class="line"><span class="keyword">class </span>UpperMatrix;</div></div><!-- fragment --><ul>
<li>MT: specifies the type of the matrix to be adapted. <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> can be used with any non-cv-qualified, non-reference, non-pointer, non-expression dense or sparse matrix type. Note that the given matrix type must be either resizable (as for instance <a class="el" href="../../d6/d60/classblaze_1_1HybridMatrix.html" title="Efficient implementation of a dynamically sized matrix with static memory.The HybridMatrix class temp...">HybridMatrix</a> or <a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">DynamicMatrix</a>) or must be square at compile time (as for instance <a class="el" href="../../d3/dd3/classblaze_1_1StaticMatrix.html" title="Efficient implementation of a fixed-sized matrix.The StaticMatrix class template is the representatio...">StaticMatrix</a>).</li>
<li>SO: specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. This template parameter doesn't have to be explicitly defined, but is automatically derived from the first template parameter.</li>
<li>DF: specifies whether the given matrix type is a dense or sparse matrix type. This template parameter doesn't have to be defined explicitly, it is automatically derived from the first template parameter. Defining the parameter explicitly may result in a compilation error!</li>
</ul>
<p>The following examples give an impression of several possible upper matrices:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177">blaze::unaligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga1858f68dbe5aba0ded4e45358324e3a1">blaze::unpadded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">blaze::columnMajor</a>;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 3x3 row-major dense upper matrix with static memory</span></div><div class="line"><a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix&lt; blaze::StaticMatrix&lt;int,3UL,3UL,rowMajor&gt;</a> &gt; A;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a resizable column-major dense upper matrix based on HybridMatrix</span></div><div class="line"><a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix&lt; blaze::HybridMatrix&lt;float,4UL,4UL,columnMajor&gt;</a> B;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a resizable row-major dense upper matrix based on DynamicMatrix</span></div><div class="line"><a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix&lt; blaze::DynamicMatrix&lt;double,rowMajor&gt;</a> &gt; C;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a fixed-size row-major dense upper matrix based on CustomMatrix</span></div><div class="line"><a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix&lt; blaze::CustomMatrix&lt;double,unaligned,unpadded,rowMajor&gt;</a> &gt; D;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a compressed row-major single precision upper matrix</span></div><div class="line"><a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix&lt; blaze::CompressedMatrix&lt;float,rowMajor&gt;</a> &gt; E;</div></div><!-- fragment --><p>The storage order of an upper matrix is depending on the storage order of the adapted matrix type <em>MT</em>. In case the adapted matrix is stored in a row-wise fashion (i.e. is specified as <a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>), the upper matrix will also be a row-major matrix. Otherwise, if the adapted matrix is column-major (i.e. is specified as <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>), the upper matrix will also be a column-major matrix.</p>
<p><br />
 </p>
<h1><a class="anchor" id="uppermatrix_special_properties"></a>
Special Properties of Upper Triangular Matrices</h1>
<p>An upper matrix is used exactly like a matrix of the underlying, adapted matrix type <em>MT</em>. It also provides (nearly) the same interface as the underlying matrix type. However, there are some important exceptions resulting from the upper matrix constraint:</p>
<ol type="1">
<li><b><a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html#uppermatrix_square">Upper Matrices Must Always be Square!</a></b></li>
<li><b><a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html#uppermatrix_upper">The Upper Matrix Property is Always Enforced!</a></b></li>
<li><b><a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html#uppermatrix_initialization">The Lower Elements of a Dense Upper Matrix are Always Default Initialized!</a></b></li>
<li><b><a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html#uppermatrix_storage">Dense Upper Matrices Also Store the Lower Elements!</a></b></li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_square"></a>
Upper Matrices Must Always be Square!</h2>
<p>In case a resizable matrix is used (as for instance <a class="el" href="../../d6/d60/classblaze_1_1HybridMatrix.html" title="Efficient implementation of a dynamically sized matrix with static memory.The HybridMatrix class temp...">blaze::HybridMatrix</a>, <a class="el" href="../../de/d1e/classblaze_1_1DynamicMatrix.html" title="Efficient implementation of a dynamic  matrix.The DynamicMatrix class template is the representation ...">blaze::DynamicMatrix</a>, or <a class="el" href="../../da/d7a/classblaze_1_1CompressedMatrix.html" title="Efficient implementation of a  compressed matrix.The CompressedMatrix class template is the represent...">blaze::CompressedMatrix</a>), this means that the according constructors, the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga651c6be92e3a13425c42f3d92cf309fc" title="Changing the size of the matrix. ">resize()</a></code> and the <code>extend()</code> functions only expect a single parameter, which specifies both the number of rows and columns, instead of two (one for the number of rows and one for the number of columns):</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"></div><div class="line"><span class="comment">// Default constructed, default initialized, row-major 3x3 upper dynamic matrix</span></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt; &gt; A( 3 );</div><div class="line"></div><div class="line"><span class="comment">// Resizing the matrix to 5x5</span></div><div class="line">A.resize( 5 );</div><div class="line"></div><div class="line"><span class="comment">// Extending the number of rows and columns by 2, resulting in a 7x7 matrix</span></div><div class="line">A.extend( 2 );</div></div><!-- fragment --><p>In case a matrix with a fixed size is used (as for instance <a class="el" href="../../d3/dd3/classblaze_1_1StaticMatrix.html" title="Efficient implementation of a fixed-sized matrix.The StaticMatrix class template is the representatio...">blaze::StaticMatrix</a>), the number of rows and number of columns must be specified equally:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">blaze::columnMajor</a>;</div><div class="line"></div><div class="line"><span class="comment">// Correct setup of a fixed size column-major 3x3 upper static matrix</span></div><div class="line">UpperMatrix&lt; StaticMatrix&lt;int,3UL,3UL,columnMajor&gt; &gt; A;</div><div class="line"></div><div class="line"><span class="comment">// Compilation error: the provided matrix type is not a square matrix type</span></div><div class="line">UpperMatrix&lt; StaticMatrix&lt;int,3UL,4UL,columnMajor&gt; &gt; B;</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_upper"></a>
The Upper Matrix Property is Always Enforced!</h2>
<p>This means that it is only allowed to modify elements in the upper part or the diagonal of the matrix, but not the elements in the lower part of the matrix. Also, it is only possible to assign matrices that are upper matrices themselves:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> CompressedUpper = UpperMatrix&lt; CompressedMatrix&lt;double,rowMajor&gt; &gt;;</div><div class="line"></div><div class="line"><span class="comment">// Default constructed, row-major 3x3 upper compressed matrix</span></div><div class="line">CompressedUpper A( 3 );</div><div class="line"></div><div class="line"><span class="comment">// Initializing elements via the function call operator</span></div><div class="line">A(0,0) = 1.0;  <span class="comment">// Initialization of the diagonal element (0,0)</span></div><div class="line">A(0,2) = 2.0;  <span class="comment">// Initialization of the upper element (0,2)</span></div><div class="line">A(2,1) = 9.0;  <span class="comment">// Throws an exception; invalid modification of lower element</span></div><div class="line"></div><div class="line"><span class="comment">// Inserting two more elements via the insert() function</span></div><div class="line">A.insert( 0, 1, 3.0 );  <span class="comment">// Inserting the upper element (0,1)</span></div><div class="line">A.insert( 1, 1, 4.0 );  <span class="comment">// Inserting the diagonal element (1,1)</span></div><div class="line">A.insert( 2, 0, 9.0 );  <span class="comment">// Throws an exception; invalid insertion of lower element</span></div><div class="line"></div><div class="line"><span class="comment">// Appending an element via the append() function</span></div><div class="line">A.reserve( 1, 3 );      <span class="comment">// Reserving enough capacity in row 1</span></div><div class="line">A.append( 1, 2, 5.0 );  <span class="comment">// Appending the upper element (1,2)</span></div><div class="line">A.append( 2, 1, 9.0 );  <span class="comment">// Throws an exception; appending an element in the lower part</span></div><div class="line"></div><div class="line"><span class="comment">// Access via a non-const iterator</span></div><div class="line"><a class="code" href="../../d2/de9/namespaceblaze.html#a8edd0302e146f39097a411783a7214f5">CompressedUpper::Iterator</a> it = A.begin(1);</div><div class="line">*it = 9.0;  <span class="comment">// Modifies the diagonal element (1,1)</span></div><div class="line">++it;</div><div class="line">*it = 6.0;  <span class="comment">// Modifies the upper element (1,2)</span></div><div class="line"></div><div class="line"><span class="comment">// Erasing elements via the erase() function</span></div><div class="line">A.erase( 0, 0 );  <span class="comment">// Erasing the diagonal element (0,0)</span></div><div class="line">A.erase( 0, 2 );  <span class="comment">// Erasing the upper element (0,2)</span></div><div class="line"></div><div class="line"><span class="comment">// Construction from an upper dense matrix</span></div><div class="line">StaticMatrix&lt;double,3UL,3UL&gt; B( { { 3.0,  8.0, -2.0 },</div><div class="line">                                  { 0.0,  0.0, -1.0 },</div><div class="line">                                  { 0.0,  0.0,  4.0 } } );</div><div class="line"></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt; &gt; C( B );  <span class="comment">// OK</span></div><div class="line"></div><div class="line"><span class="comment">// Assignment of a non-upper dense matrix</span></div><div class="line">StaticMatrix&lt;double,3UL,3UL&gt; D( { {  3.0,  8.0, -2.0 },</div><div class="line">                                  {  0.0,  0.0, -1.0 },</div><div class="line">                                  { -2.0,  0.0,  4.0 } } );</div><div class="line"></div><div class="line">C = D;  <span class="comment">// Throws an exception; upper matrix invariant would be violated!</span></div></div><!-- fragment --><p>The upper matrix property is also enforced for upper custom matrices: In case the given array of elements does not represent a upper matrix, a <em>std::invalid_argument</em> exception is thrown:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d43/classblaze_1_1CustomMatrix.html">blaze::CustomMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177">blaze::unaligned</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#ga1858f68dbe5aba0ded4e45358324e3a1">blaze::unpadded</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> CustomUpper = UpperMatrix&lt; CustomMatrix&lt;double,unaligned,unpadded,rowMajor&gt; &gt;;</div><div class="line"></div><div class="line"><span class="comment">// Creating a 3x3 upper custom matrix from a properly initialized array</span></div><div class="line"><span class="keywordtype">double</span> array[9] = { 1.0, 2.0, 3.0,</div><div class="line">                    0.0, 4.0, 5.0,</div><div class="line">                    0.0, 0.0, 6.0 };</div><div class="line">CustomUpper A( array, 3UL );  <span class="comment">// OK</span></div><div class="line"></div><div class="line"><span class="comment">// Attempt to create a second 3x3 upper custom matrix from an uninitialized array</span></div><div class="line">CustomUpper B( <span class="keyword">new</span> <span class="keywordtype">double</span>[9UL], 3UL, <a class="code" href="../../d0/d60/structblaze_1_1ArrayDelete.html">blaze::ArrayDelete</a>() );  <span class="comment">// Throws an exception</span></div></div><!-- fragment --><p>Finally, the upper matrix property is enforced for views (rows, columns, submatrices, ...) on the upper matrix. The following example demonstrates that modifying the elements of an entire row and submatrix of an upper matrix only affects the upper and diagonal matrix elements:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"></div><div class="line"><span class="comment">// Setup of the upper matrix</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       ( 0 1 0 4 )</span></div><div class="line"><span class="comment">//   A = ( 0 2 3 0 )</span></div><div class="line"><span class="comment">//       ( 0 0 0 5 )</span></div><div class="line"><span class="comment">//       ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;int&gt; &gt; A( 4 );</div><div class="line">A(0,1) = 1;</div><div class="line">A(0,3) = 4;</div><div class="line">A(1,1) = 2;</div><div class="line">A(1,2) = 3;</div><div class="line">A(2,3) = 5;</div><div class="line"></div><div class="line"><span class="comment">// Setting the upper and diagonal elements in the 1st row to 9 results in the matrix</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       ( 0 1 0 4 )</span></div><div class="line"><span class="comment">//   A = ( 0 9 9 9 )</span></div><div class="line"><span class="comment">//       ( 0 0 0 5 )</span></div><div class="line"><span class="comment">//       ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga062bf148d887c56afde41f4649897dbe">row</a>( A, 1 ) = 9;</div><div class="line"></div><div class="line"><span class="comment">// Setting the upper and diagonal elements in the 1st and 2nd column to 7 results in</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       ( 0 7 7 4 )</span></div><div class="line"><span class="comment">//   A = ( 0 7 7 9 )</span></div><div class="line"><span class="comment">//       ( 0 0 7 5 )</span></div><div class="line"><span class="comment">//       ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 0, 1, 4, 2 ) = 7;</div></div><!-- fragment --><p>The next example demonstrates the (compound) assignment to rows/columns and submatrices of upper matrices. Since only upper and diagonal elements may be modified the matrix to be assigned must be structured such that the upper matrix invariant of the upper matrix is preserved. Otherwise a <em>std::invalid_argument</em> exception is thrown:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a006b6328815f2632d2c5ab8b869c5cf0">blaze::rowVector</a>;</div><div class="line"></div><div class="line"><span class="comment">// Setup of two default 4x4 upper matrices</span></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;int&gt; &gt; A1( 4 ), A2( 4 );</div><div class="line"></div><div class="line"><span class="comment">// Setup of a 4-dimensional vector</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//   v = ( 0 1 2 3 )</span></div><div class="line"><span class="comment">//</span></div><div class="line">DynamicVector&lt;int,rowVector&gt; v( 4, 0 );</div><div class="line">v[1] = 1;</div><div class="line">v[2] = 2;</div><div class="line">v[3] = 3;</div><div class="line"></div><div class="line"><span class="comment">// OK: Assigning v to the 1st row of A1 preserves the upper matrix invariant</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//   A1 = ( 0 1 2 3 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga062bf148d887c56afde41f4649897dbe">row</a>( A1, 1 ) = v;  <span class="comment">// OK</span></div><div class="line"></div><div class="line"><span class="comment">// Error: Assigning v to the 2nd row of A1 violates the upper matrix invariant! The element</span></div><div class="line"><span class="comment">//   marked with X cannot be assigned and triggers an exception.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//   A1 = ( 0 1 2 3 )</span></div><div class="line"><span class="comment">//        ( 0 X 2 3 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga062bf148d887c56afde41f4649897dbe">row</a>( A1, 2 ) = v;  <span class="comment">// Assignment throws an exception!</span></div><div class="line"></div><div class="line"><span class="comment">// Setup of the 3x2 dynamic matrix</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       ( 7 8 )</span></div><div class="line"><span class="comment">//   B = ( 0 9 )</span></div><div class="line"><span class="comment">//       ( 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line">DynamicMatrix&lt;int&gt; B( 3UL, 2UL, 0 );</div><div class="line">B(0,0) = 7;</div><div class="line">B(0,1) = 8;</div><div class="line">B(1,1) = 9;</div><div class="line"></div><div class="line"><span class="comment">// OK: Assigning B to a submatrix of A2 such that the upper matrix invariant can be preserved</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//   A2 = ( 0 7 8 0 )</span></div><div class="line"><span class="comment">//        ( 0 0 9 0 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A2, 1UL, 1UL, 3UL, 2UL ) = B;  <span class="comment">// OK</span></div><div class="line"></div><div class="line"><span class="comment">// Error: Assigning B to a submatrix of A2 such that the upper matrix invariant cannot be</span></div><div class="line"><span class="comment">//   preserved! The elements marked with X cannot be assigned without violating the invariant!</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//   A2 = ( X 8 8 0 )</span></div><div class="line"><span class="comment">//        ( 0 X 9 0 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A2, 1UL, 0UL, 3UL, 2UL ) = B;  <span class="comment">// Assignment throws an exception!</span></div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_initialization"></a>
The Lower Elements of a Dense Upper Matrix are Always Default Initialized!</h2>
<p>Although this results in a small loss of efficiency during the creation of a dense upper matrix this initialization is important since otherwise the upper matrix property of dense upper matrices would not be guaranteed:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"></div><div class="line"><span class="comment">// Uninitialized, 5x5 row-major dynamic matrix</span></div><div class="line">DynamicMatrix&lt;int,rowMajor&gt; A( 5, 5 );</div><div class="line"></div><div class="line"><span class="comment">// 5x5 row-major upper dynamic matrix with default initialized lower matrix</span></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;int,rowMajor&gt; &gt; B( 5 );</div></div><!-- fragment --><p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_storage"></a>
Dense Upper Matrices Also Store the Lower Elements!</h2>
<p>It is important to note that dense upper matrices store all elements, including the elements in the lower part of the matrix, and therefore don't provide any kind of memory reduction! There are two main reasons for this: First, storing also the lower elements guarantees maximum performance for many algorithms that perform vectorized operations on the upper matrix, which is especially true for small dense matrices. Second, conceptually the <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> adaptor merely restricts the interface to the matrix type <em>MT</em> and does not change the data layout or the underlying matrix type.</p>
<p><br />
 </p>
<h1><a class="anchor" id="uppermatrix_arithmetic_operations"></a>
Arithmetic Operations</h1>
<p>An <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> matrix can participate in numerical operations in any way any other dense or sparse matrix can participate. It can also be combined with any other dense or sparse vector or matrix. The following code example gives an impression of the use of <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> within arithmetic operations:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d6/d60/classblaze_1_1HybridMatrix.html">blaze::HybridMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">blaze::columnMajor</a>;</div><div class="line"></div><div class="line">DynamicMatrix&lt;double,rowMajor&gt; A( 3, 3 );</div><div class="line">CompressedMatrix&lt;double,rowMajor&gt; B( 3, 3 );</div><div class="line"></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt; &gt; C( 3 );</div><div class="line">UpperMatrix&lt; CompressedMatrix&lt;double,rowMajor&gt; &gt; D( 3 );</div><div class="line"></div><div class="line">UpperMatrix&lt; HybridMatrix&lt;float,3UL,3UL,rowMajor&gt; &gt; E;</div><div class="line">UpperMatrix&lt; StaticMatrix&lt;float,3UL,3UL,columnMajor&gt; &gt; F;</div><div class="line"></div><div class="line">E = A + B;     <span class="comment">// Matrix addition and assignment to a row-major upper matrix (includes runtime check)</span></div><div class="line">F = C - D;     <span class="comment">// Matrix subtraction and assignment to a column-major upper matrix (only compile time check)</span></div><div class="line">F = A * D;     <span class="comment">// Matrix multiplication between a dense and a sparse matrix (includes runtime check)</span></div><div class="line"></div><div class="line">C *= 2.0;      <span class="comment">// In-place scaling of matrix C</span></div><div class="line">E  = 2.0 * B;  <span class="comment">// Scaling of matrix B (includes runtime check)</span></div><div class="line">F  = C * 2.0;  <span class="comment">// Scaling of matrix C (only compile time check)</span></div><div class="line"></div><div class="line">E += A - B;    <span class="comment">// Addition assignment (includes runtime check)</span></div><div class="line">F -= C + D;    <span class="comment">// Subtraction assignment (only compile time check)</span></div><div class="line">F *= A * D;    <span class="comment">// Multiplication assignment (includes runtime check)</span></div></div><!-- fragment --><p>Note that it is possible to assign any kind of matrix to an upper matrix. In case the matrix to be assigned is not upper at compile time, a runtime check is performed.</p>
<p><br />
 </p>
<h1><a class="anchor" id="uppermatrix_block_structured"></a>
Block-Structured Upper Matrices</h1>
<p>It is also possible to use block-structured upper matrices:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d3/dd3/classblaze_1_1StaticMatrix.html">blaze::StaticMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"></div><div class="line"><span class="comment">// Definition of a 5x5 block-structured upper matrix based on CompressedMatrix</span></div><div class="line">UpperMatrix&lt; CompressedMatrix&lt; StaticMatrix&lt;int,3UL,3UL&gt; &gt; &gt; A( 5 );</div></div><!-- fragment --><p>Also in this case the upper matrix invariant is enforced, i.e. it is not possible to manipulate elements in the lower part of the matrix:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> StaticMatrix&lt;int,3UL,3UL&gt; B( { { 1, -4,  5 },</div><div class="line">                                     { 6,  8, -3 },</div><div class="line">                                     { 2, -1,  2 } } )</div><div class="line"></div><div class="line">A.insert( 2, 4, B );  <span class="comment">// Inserting the elements (2,4)</span></div><div class="line">A(4,2)(1,1) = -5;     <span class="comment">// Invalid manipulation of lower matrix element; Results in an exception</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="uppermatrix_performance"></a>
Performance Considerations</h1>
<p>The <b>Blaze</b> library tries to exploit the properties of upper matrices whenever and wherever possible. Thus using an upper triangular matrix instead of a general matrix can result in a considerable performance improvement. However, there are also situations when using an upper triangular matrix introduces some overhead. The following examples demonstrate several common situations where upper matrices can positively or negatively impact performance.</p>
<p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_matrix_matrix_multiplication"></a>
Positive Impact: Matrix/Matrix Multiplication</h2>
<p>When multiplying two matrices, at least one of which is upper triangular, <b>Blaze</b> can exploit the fact that the lower part of the matrix contains only default elements and restrict the algorithm to the upper and diagonal elements. The following example demonstrates this by means of a dense matrix/dense matrix multiplication:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583">blaze::columnMajor</a>;</div><div class="line"></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt; &gt; A;</div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,columnMajor&gt; &gt; B;</div><div class="line">DynamicMatrix&lt;double,columnMajor&gt; C;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line">C = A * B;</div></div><!-- fragment --><p>In comparison to a general matrix multiplication, the performance advantage is significant, especially for large matrices. Therefore is it highly recommended to use the <a class="el" href="../../d5/daf/classblaze_1_1UpperMatrix.html" title="Matrix adapter for upper triangular  matrices. ">UpperMatrix</a> adaptor when a matrix is known to be upper triangular. Note however that the performance advantage is most pronounced for dense matrices and much less so for sparse matrices.</p>
<p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_matrix_vector_multiplication"></a>
Positive Impact: Matrix/Vector Multiplication</h2>
<p>A similar performance improvement can be gained when using an upper matrix in a matrix/vector multiplication:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../da/d9e/classblaze_1_1DynamicVector.html">blaze::DynamicVector</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#acee466faebcaba59afde0fbfe22041aa">blaze::columnVector</a>;</div><div class="line"></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double,rowMajor&gt; &gt; A;</div><div class="line">DynamicVector&lt;double,columnVector&gt; x, y;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line">y = A * x;</div></div><!-- fragment --><p>In this example, <b>Blaze</b> also exploits the structure of the matrix and approx. halves the runtime of the multiplication. Also in case of matrix/vector multiplications the performance improvement is most pronounced for dense matrices and much less so for sparse matrices.</p>
<p><br />
 </p>
<h2><a class="anchor" id="uppermatrix_assignment"></a>
Negative Impact: Assignment of a General Matrix</h2>
<p>In contrast to using an upper triangular matrix on the right-hand side of an assignment (i.e. for read access), which introduces absolutely no performance penalty, using an upper matrix on the left-hand side of an assignment (i.e. for write access) may introduce additional overhead when it is assigned a general matrix, which is not upper triangular at compile time:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d5/daf/classblaze_1_1UpperMatrix.html">blaze::UpperMatrix</a>;</div><div class="line"></div><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double&gt; &gt; A, C;</div><div class="line">DynamicMatrix&lt;double&gt; B;</div><div class="line"></div><div class="line">B = A;  <span class="comment">// Only read-access to the upper matrix; no performance penalty</span></div><div class="line">C = A;  <span class="comment">// Assignment of an upper matrix to another upper matrix; no runtime overhead</span></div><div class="line">C = B;  <span class="comment">// Assignment of a general matrix to an upper matrix; some runtime overhead</span></div></div><!-- fragment --><p>When assigning a general, potentially not upper matrix to an upper matrix it is necessary to check whether the matrix is upper at runtime in order to guarantee the upper triangular property of the upper matrix. In case it turns out to be upper triangular, it is assigned as efficiently as possible, if it is not, an exception is thrown. In order to prevent this runtime overhead it is therefore generally advisable to assign upper matrices to other upper matrices.<br />
In this context it is especially noteworthy that the addition, subtraction, and multiplication of two upper triangular matrices always results in another upper matrix:</p>
<div class="fragment"><div class="line">UpperMatrix&lt; DynamicMatrix&lt;double&gt; &gt; A, B, C;</div><div class="line"></div><div class="line">C = A + B;  <span class="comment">// Results in an upper matrix; no runtime overhead</span></div><div class="line">C = A - B;  <span class="comment">// Results in an upper matrix; no runtime overhead</span></div><div class="line">C = A * B;  <span class="comment">// Results in an upper matrix; no runtime overhead</span></div></div><!-- fragment --> </div><hr/>The documentation for this class was generated from the following file:<ul>
<li>blaze/math/adaptors/uppermatrix/<a class="el" href="../../d2/d17/adaptors_2uppermatrix_2BaseTemplate_8h_source.html">BaseTemplate.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 05:50:35 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
