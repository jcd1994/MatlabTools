<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>blaze::Submatrix&lt; MT, AF, SO, DF &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../Blaze.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../blaze.jpg"/></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d2/de9/namespaceblaze.html">blaze</a></li><li class="navelem"><a class="el" href="../../d1/da2/classblaze_1_1Submatrix.html">Submatrix</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">blaze::Submatrix&lt; MT, AF, SO, DF &gt; Class Template Reference<div class="ingroups"><a class="el" href="../../de/df1/group__math.html">Math module</a> &raquo; <a class="el" href="../../d0/d48/group__views.html">Views</a> &raquo; <a class="el" href="../../dd/de6/group__submatrix.html">Submatrix</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d4/dae/structblaze_1_1View.html" title="Base class for all views.The View class serves as a tag for all views (subvectors, submatrices, rows, columns, ...). All classes that represent a view and that are used within the expression template environment of the Blaze library have to derive publicly from this class in order to qualify as a view. Only in case a class is derived publicly from the View base class, the IsView type trait recognizes the class as valid view. ">View</a> on a specific submatrix of a dense or sparse matrix.The <a class="el" href="../../d1/da2/classblaze_1_1Submatrix.html" title="View on a specific submatrix of a dense or sparse matrix.The Submatrix class template represents a vi...">Submatrix</a> class template represents a view on a specific submatrix of a dense or sparse matrix primitive. The type of the matrix is specified via the first template parameter:  
 <a href="../../d1/da2/classblaze_1_1Submatrix.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../db/da8/views_2submatrix_2BaseTemplate_8h_source.html">BaseTemplate.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MT, bool AF = unaligned, bool SO = IsColumnMajorMatrix&lt;MT&gt;::value, bool DF = IsDenseMatrix&lt;MT&gt;::value&gt;<br />
class blaze::Submatrix&lt; MT, AF, SO, DF &gt;</h3>

<p><a class="el" href="../../d4/dae/structblaze_1_1View.html" title="Base class for all views.The View class serves as a tag for all views (subvectors, submatrices, rows, columns, ...). All classes that represent a view and that are used within the expression template environment of the Blaze library have to derive publicly from this class in order to qualify as a view. Only in case a class is derived publicly from the View base class, the IsView type trait recognizes the class as valid view. ">View</a> on a specific submatrix of a dense or sparse matrix.</p>
<p>The <a class="el" href="../../d1/da2/classblaze_1_1Submatrix.html" title="View on a specific submatrix of a dense or sparse matrix.The Submatrix class template represents a vi...">Submatrix</a> class template represents a view on a specific submatrix of a dense or sparse matrix primitive. The type of the matrix is specified via the first template parameter: </p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt; <span class="keyword">typename</span> MT, <span class="keywordtype">bool</span> AF, <span class="keywordtype">bool</span> SO, <span class="keywordtype">bool</span> DF &gt;</div><div class="line"><span class="keyword">class </span>Submatrix;</div></div><!-- fragment --><ul>
<li>MT: specifies the type of the matrix primitive. <a class="el" href="../../d1/da2/classblaze_1_1Submatrix.html" title="View on a specific submatrix of a dense or sparse matrix.The Submatrix class template represents a vi...">Submatrix</a> can be used with every matrix primitive, but does not work with any matrix expression type.</li>
<li>AF: the alignment flag specifies whether the submatrix is aligned (<em><a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a></em>) or unaligned (<em><a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a></em>). The default value is <em><a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a></em>.</li>
<li>SO: specifies the storage order (<a class="el" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa" title="Storage order flag for row-major matrices. ">blaze::rowMajor</a>, <a class="el" href="../../d2/de9/namespaceblaze.html#a5e42e1508f7d4d364fe7c64eef78a583" title="Storage order flag for column-major matrices. ">blaze::columnMajor</a>) of the matrix. This template parameter doesn't have to be explicitly defined, but is automatically derived from the first template parameter.</li>
<li>DF: specifies whether the given matrix type is a dense or sparse matrix type. This template parameter doesn't have to be defined explicitly, it is automatically derived from the first template parameter. Defining the parameter explicitly may result in a compilation error!</li>
</ul>
<p><br />
 </p>
<h1><a class="anchor" id="submatrix_setup"></a>
Setup of Submatrices</h1>
<p>A view on a dense or sparse submatrix can be created very conveniently via the <code><a class="el" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87" title="Creating a view on a specific submatrix of the given matrix. ">submatrix()</a></code> function:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> DenseMatrixType = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"></div><div class="line">DenseMatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a dense submatrix of size 8x16, starting in row 0 and column 4</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType&gt;</a> sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 0UL, 4UL, 8UL, 16UL );</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> SparseMatrixType = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"></div><div class="line">SparseMatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a sparse submatrix of size 8x16, starting in row 0 and column 4</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;SparseMatrixType&gt;</a> sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 0UL, 4UL, 8UL, 16UL );</div></div><!-- fragment --><p>This view can be treated as any other dense or sparse matrix, i.e. it can be assigned to, it can be copied from, and it can be used in arithmetic operations. The view can also be used on both sides of an assignment: The submatrix can either be used as an alias to grant write access to a specific submatrix of a matrix primitive on the left-hand side of an assignment or to grant read-access to a specific submatrix of a matrix primitive or expression on the right-hand side of an assignment. The following example demonstrates this in detail:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> DenseMatrixType  = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::columnMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SparseMatrixType = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"></div><div class="line">DenseMatrixType A, B;</div><div class="line">SparseMatrixType C;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a dense submatrix of size 8x4, starting in row 0 and column 2</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType&gt;</a> sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 0UL, 2UL, 8UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Setting the submatrix of A to a 8x4 submatrix of B</span></div><div class="line">sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( B, 0UL, 0UL, 8UL, 4UL );</div><div class="line"></div><div class="line"><span class="comment">// Copying the sparse matrix C into another 8x4 submatrix of A</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 8UL, 2UL, 8UL, 4UL ) = C;</div><div class="line"></div><div class="line"><span class="comment">// Assigning part of the result of a matrix addition to the first submatrix</span></div><div class="line">sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( B + C, 0UL, 0UL, 8UL, 4UL );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_element_access"></a>
Element access</h1>
<p>A submatrix can be used like any other dense or sparse matrix. For instance, the elements of the submatrix can be directly accessed with the function call operator:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line">MatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a 8x8 submatrix, starting from position (4,4)</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a> sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 4UL, 4UL, 8UL, 8UL );</div><div class="line"></div><div class="line"><span class="comment">// Setting the element (0,0) of the submatrix, which corresponds to</span></div><div class="line"><span class="comment">// the element at position (4,4) in matrix A</span></div><div class="line">sm(0,0) = 2.0;</div></div><!-- fragment --><p>Alternatively, the elements of a submatrix can be traversed via (const) iterators. Just as with matrices, in case of non-const submatrices, <code><a class="el" href="../../dd/d7a/group__matrix.html#ga8f0c048c86b644d1b9be16edc43d1b99" title="Returns an iterator to the first element of row/column i. ">begin()</a></code> and <code><a class="el" href="../../dd/d7a/group__matrix.html#ga7fdc81bb7ed1970229a4f29afebfd7a6" title="Returns an iterator just past the last element of row/column i. ">end()</a></code> return an Iterator, which allows a manipulation of the non-zero values, in case of constant submatrices a ConstIterator is returned:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType    = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;int,blaze::rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a>;</div><div class="line"></div><div class="line">MatrixType A( 256UL, 512UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a reference to a specific submatrix of matrix A</span></div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 16UL, 16UL, 64UL, 128UL );</div><div class="line"></div><div class="line"><span class="comment">// Traversing the elements of the 0th row via iterators to non-const elements</span></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a8edd0302e146f39097a411783a7214f5">SubmatrixType::Iterator</a> it=sm.begin(0); it!=sm.end(0); ++it ) {</div><div class="line">   *it = ...;  <span class="comment">// OK: Write access to the dense submatrix value.</span></div><div class="line">   ... = *it;  <span class="comment">// OK: Read access to the dense submatrix value.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Traversing the elements of the 1st row via iterators to const elements</span></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a67e310139c2b875a90b3bfe6ba36a441">SubmatrixType::ConstIterator</a> it=sm.begin(1); it!=sm.end(1); ++it ) {</div><div class="line">   *it = ...;  <span class="comment">// Compilation error: Assignment to the value via a ConstIterator is invalid.</span></div><div class="line">   ... = *it;  <span class="comment">// OK: Read access to the dense submatrix value.</span></div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType    = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;int,blaze::rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a>;</div><div class="line"></div><div class="line">MatrixType A( 256UL, 512UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a reference to a specific submatrix of matrix A</span></div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 16UL, 16UL, 64UL, 128UL );</div><div class="line"></div><div class="line"><span class="comment">// Traversing the elements of the 0th row via iterators to non-const elements</span></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a8edd0302e146f39097a411783a7214f5">SubmatrixType::Iterator</a> it=sm.begin(0); it!=sm.end(0); ++it ) {</div><div class="line">   it-&gt;value() = ...;  <span class="comment">// OK: Write access to the value of the non-zero element.</span></div><div class="line">   ... = it-&gt;value();  <span class="comment">// OK: Read access to the value of the non-zero element.</span></div><div class="line">   it-&gt;index() = ...;  <span class="comment">// Compilation error: The index of a non-zero element cannot be changed.</span></div><div class="line">   ... = it-&gt;index();  <span class="comment">// OK: Read access to the index of the sparse element.</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Traversing the elements of the 1st row via iterators to const elements</span></div><div class="line"><span class="keywordflow">for</span>( <a class="code" href="../../d2/de9/namespaceblaze.html#a67e310139c2b875a90b3bfe6ba36a441">SubmatrixType::ConstIterator</a> it=sm.begin(1); it!=sm.end(1); ++it ) {</div><div class="line">   it-&gt;value() = ...;  <span class="comment">// Compilation error: Assignment to the value via a ConstIterator is invalid.</span></div><div class="line">   ... = it-&gt;value();  <span class="comment">// OK: Read access to the value of the non-zero element.</span></div><div class="line">   it-&gt;index() = ...;  <span class="comment">// Compilation error: The index of a non-zero element cannot be changed.</span></div><div class="line">   ... = it-&gt;index();  <span class="comment">// OK: Read access to the index of the sparse element.</span></div><div class="line">}</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_element_insertion"></a>
Element Insertion</h1>
<p>Inserting/accessing elements in a sparse submatrix can be done by several alternative functions. The following example demonstrates all options:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line">MatrixType A( 256UL, 512UL );  <span class="comment">// Non-initialized matrix of size 256x512</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a>;</div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 10UL, 10UL, 16UL, 16UL );  <span class="comment">// View on a 16x16 submatrix of A</span></div><div class="line"></div><div class="line"><span class="comment">// The function call operator provides access to all possible elements of the sparse submatrix,</span></div><div class="line"><span class="comment">// including the zero elements. In case the subscript operator is used to access an element</span></div><div class="line"><span class="comment">// that is currently not stored in the sparse submatrix, the element is inserted into the</span></div><div class="line"><span class="comment">// submatrix.</span></div><div class="line">sm(2,4) = 2.0;</div><div class="line"></div><div class="line"><span class="comment">// The second operation for inserting elements is the set() function. In case the element is</span></div><div class="line"><span class="comment">// not contained in the submatrix it is inserted into the submatrix, if it is already contained</span></div><div class="line"><span class="comment">// in the submatrix its value is modified.</span></div><div class="line">sm.set( 2UL, 5UL, -1.2 );</div><div class="line"></div><div class="line"><span class="comment">// An alternative for inserting elements into the submatrix is the \c insert() function. However,</span></div><div class="line"><span class="comment">// it inserts the element only in case the element is not already contained in the submatrix.</span></div><div class="line">sm.insert( 2UL, 6UL, 3.7 );</div><div class="line"></div><div class="line"><span class="comment">// Just as in the case of sparse matrices, elements can also be inserted via the \c append()</span></div><div class="line"><span class="comment">// function. In case of submatrices, \c append() also requires that the appended element&#39;s</span></div><div class="line"><span class="comment">// index is strictly larger than the currently largest non-zero index in the according row</span></div><div class="line"><span class="comment">// or column of the submatrix and that the according row&#39;s or column&#39;s capacity is large enough</span></div><div class="line"><span class="comment">// to hold the new element. Note however that due to the nature of a submatrix, which may be an</span></div><div class="line"><span class="comment">// alias to the middle of a sparse matrix, the \c append() function does not work as efficiently</span></div><div class="line"><span class="comment">// for a submatrix as it does for a matrix.</span></div><div class="line">sm.reserve( 2UL, 10UL );</div><div class="line">sm.append( 2UL, 10UL, -2.1 );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_common_operations"></a>
Common Operations</h1>
<p>The current size of the matrix, i.e. the number of rows or columns can be obtained via the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga7b0c6e30994ba97cc2817a848355daf4" title="Returns the current number of rows of the matrix. ">rows()</a></code> and <code><a class="el" href="../../dd/d7a/group__matrix.html#ga43caf6f27a219eb68a76ebdf2550b62d" title="Returns the current number of columns of the matrix. ">columns()</a></code> functions, the current total capacity via the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga41e8f2c5d0de752c667be20765570e56" title="Returns the maximum capacity of the matrix. ">capacity()</a></code> function, and the number of non-zero elements via the <code><a class="el" href="../../dd/d7a/group__matrix.html#ga2f34f7e65e4d2be9617f824285073923" title="Returns the total number of non-zero elements in the matrix. ">nonZeros()</a></code> function. However, since submatrices are views on a specific submatrix of a matrix, several operations are not possible on views, such as resizing and swapping:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType    = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;int,blaze::rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a>;</div><div class="line"></div><div class="line">MatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a view on the a 8x12 submatrix of matrix A</span></div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 0UL, 0UL, 8UL, 12UL );</div><div class="line"></div><div class="line">sm.rows();      <span class="comment">// Returns the number of rows of the submatrix</span></div><div class="line">sm.columns();   <span class="comment">// Returns the number of columns of the submatrix</span></div><div class="line">sm.capacity();  <span class="comment">// Returns the capacity of the submatrix</span></div><div class="line">sm.nonZeros();  <span class="comment">// Returns the number of non-zero elements contained in the submatrix</span></div><div class="line"></div><div class="line">sm.resize( 10UL, 8UL );  <span class="comment">// Compilation error: Cannot resize a submatrix of a matrix</span></div><div class="line"></div><div class="line">SubmatrixType sm2 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 8UL, 0UL, 12UL, 8UL );</div><div class="line"><a class="code" href="../../d0/d90/group__diagonal__matrix.html#gaab43761918ec443f581bbbebb71cd538">swap</a>( sm, sm2 );  <span class="comment">// Compilation error: Swap operation not allowed</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_arithmetic_operations"></a>
Arithmetic Operations</h1>
<p>The following example gives an impression of the use of <a class="el" href="../../d1/da2/classblaze_1_1Submatrix.html" title="View on a specific submatrix of a dense or sparse matrix.The Submatrix class template represents a vi...">Submatrix</a> within arithmetic operations. <a class="el" href="../../d9/de6/structblaze_1_1All.html" title="Compile time type check.This type trait determines whether the given type trait TypeTrait evaluates t...">All</a> operations (addition, subtraction, multiplication, scaling, ...) can be performed on all possible combinations of dense and sparse matrices with fitting element types:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> DenseMatrixType  = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SparseMatrixType = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line">DenseMatrixType D1, D2, D3;</div><div class="line">SparseMatrixType S1, S2;</div><div class="line"></div><div class="line"><span class="keyword">using</span> SparseVectorType = <a class="code" href="../../d5/d35/classblaze_1_1CompressedVector.html">blaze::CompressedVector&lt;double,blaze::columnVector&gt;</a>;</div><div class="line">SparseVectorType a, b;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType&gt;</a>;</div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 0UL, 0UL, 8UL, 8UL );  <span class="comment">// View on the 8x8 submatrix of matrix D1</span></div><div class="line">                                                         <span class="comment">// starting from row 0 and column 0</span></div><div class="line"></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 0UL, 8UL, 8UL, 8UL ) = D2;  <span class="comment">// Dense matrix initialization of the 8x8 submatrix</span></div><div class="line">                                           <span class="comment">// starting in row 0 and column 8</span></div><div class="line">sm = S1;                                   <span class="comment">// Sparse matrix initialization of the second 8x8 submatrix</span></div><div class="line"></div><div class="line">D3 = sm + D2;                                    <span class="comment">// Dense matrix/dense matrix addition</span></div><div class="line">S2 = S1  - <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 0UL, 8UL, 8UL );  <span class="comment">// Sparse matrix/dense matrix subtraction</span></div><div class="line">D2 = sm * <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 8UL, 8UL, 8UL );   <span class="comment">// Dense matrix/dense matrix multiplication</span></div><div class="line"></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 0UL, 8UL, 8UL ) *= 2.0;      <span class="comment">// In-place scaling of a submatrix of D1</span></div><div class="line">D2 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 8UL, 8UL, 8UL ) * 2.0;  <span class="comment">// Scaling of the a submatrix of D1</span></div><div class="line">D2 = 2.0 * sm;                                   <span class="comment">// Scaling of the a submatrix of D1</span></div><div class="line"></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 0UL, 8UL, 8UL, 8UL ) += D2;  <span class="comment">// Addition assignment</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 0UL, 8UL, 8UL ) -= S1;  <span class="comment">// Subtraction assignment</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 8UL, 8UL, 8UL, 8UL ) *= sm;  <span class="comment">// Multiplication assignment</span></div><div class="line"></div><div class="line">a = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 4UL, 4UL, 8UL, 8UL ) * b;  <span class="comment">// Dense matrix/sparse vector multiplication</span></div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_aligned_submatrix"></a>
Aligned Submatrices</h1>
<p>Usually submatrices can be defined anywhere within a matrix. They may start at any position and may have an arbitrary extension (only restricted by the extension of the underlying matrix). However, in contrast to matrices themselves, which are always properly aligned in memory and therefore can provide maximum performance, this means that submatrices in general have to be considered to be unaligned. This can be made explicit by the <em><a class="el" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177" title="Alignment flag for unaligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::unaligned</a></em> flag:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gaa4c0db94efdf35b9bf1834ace9c48177">blaze::unaligned</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> DenseMatrixType = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"></div><div class="line">DenseMatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Identical creations of an unaligned submatrix of size 8x8, starting in row 0 and column 0</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType&gt;</a>           sm1 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>           ( A, 0UL, 0UL, 8UL, 8UL );</div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType&gt;</a>           sm2 = submatrix&lt;unaligned&gt;( A, 0UL, 0UL, 8UL, 8UL );</div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType,unaligned&gt;</a> sm3 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>           ( A, 0UL, 0UL, 8UL, 8UL );</div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType,unaligned&gt;</a> sm4 = submatrix&lt;unaligned&gt;( A, 0UL, 0UL, 8UL, 8UL );</div></div><!-- fragment --><p><a class="el" href="../../d9/de6/structblaze_1_1All.html" title="Compile time type check.This type trait determines whether the given type trait TypeTrait evaluates t...">All</a> of these calls to the <code><a class="el" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87" title="Creating a view on a specific submatrix of the given matrix. ">submatrix()</a></code> function are identical. Whether the alignment flag is explicitly specified or not, it always returns an unaligned submatrix. Whereas this may provide full flexibility in the creation of submatrices, this might result in performance restrictions (even in case the specified submatrix could be aligned). However, it is also possible to create aligned submatrices. Aligned submatrices are identical to unaligned submatrices in all aspects, except that they may pose additional alignment restrictions and therefore have less flexibility during creation, but don't suffer from performance penalties and provide the same performance as the underlying matrix. Aligned submatrices are created by explicitly specifying the <em><a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a></em> flag:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7">blaze::aligned</a>;</div><div class="line"></div><div class="line"><span class="comment">// Creating an aligned submatrix of size 8x8, starting in row 0 and column 0</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;DenseMatrixType,aligned&gt;</a> sv = submatrix&lt;aligned&gt;( A, 0UL, 0UL, 8UL, 8UL );</div></div><!-- fragment --><p>The alignment restrictions refer to system dependent address restrictions for the used element type and the available vectorization mode (SSE, AVX, ...). The following source code gives some examples for a double precision dense matrix, assuming that AVX is available, which packs 4 <code>double</code> values into a SIMD vector:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../d2/de9/namespaceblaze.html#a511878ce70095271b6d0dd5b855a9eaa">blaze::rowMajor</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> MatrixType    = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType,aligned&gt;</a>;</div><div class="line"></div><div class="line">MatrixType D( 13UL, 17UL );</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// OK: Starts at position (0,0) and the number of rows and columns are a multiple of 4</span></div><div class="line">SubmatrixType dsm1 = submatrix&lt;aligned&gt;( D, 0UL, 0UL, 8UL, 12UL );</div><div class="line"></div><div class="line"><span class="comment">// OK: First row and column and the number of rows and columns are all a multiple of 4</span></div><div class="line">SubmatrixType dsm2 = submatrix&lt;aligned&gt;( D, 4UL, 12UL, 8UL, 16UL );</div><div class="line"></div><div class="line"><span class="comment">// OK: First row and column are a multiple of 4 and the submatrix includes the last row and column</span></div><div class="line">SubmatrixType dsm3 = submatrix&lt;aligned&gt;( D, 4UL, 0UL, 9UL, 17UL );</div><div class="line"></div><div class="line"><span class="comment">// Error: First row is not a multiple of 4</span></div><div class="line">SubmatrixType dsm4 = submatrix&lt;aligned&gt;( D, 2UL, 4UL, 12UL, 12UL );</div><div class="line"></div><div class="line"><span class="comment">// Error: First column is not a multiple of 4</span></div><div class="line">SubmatrixType dsm5 = submatrix&lt;aligned&gt;( D, 0UL, 2UL, 8UL, 8UL );</div><div class="line"></div><div class="line"><span class="comment">// Error: The number of rows is not a multiple of 4 and the submatrix does not include the last row</span></div><div class="line">SubmatrixType dsm6 = submatrix&lt;aligned&gt;( D, 0UL, 0UL, 7UL, 8UL );</div><div class="line"></div><div class="line"><span class="comment">// Error: The number of columns is not a multiple of 4 and the submatrix does not include the last column</span></div><div class="line">SubmatrixType dsm6 = submatrix&lt;aligned&gt;( D, 0UL, 0UL, 8UL, 11UL );</div></div><!-- fragment --><p>Note that the discussed alignment restrictions are only valid for aligned dense submatrices. In contrast, aligned sparse submatrices at this time don't pose any additional restrictions. Therefore aligned and unaligned sparse submatrices are truly fully identical. Still, in case the <a class="el" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7" title="Alignment flag for aligned vectors and matrices.Via this flag it is possible to specify subvectors...">blaze::aligned</a> flag is specified during setup, an aligned submatrix is created:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/df1/group__math.html#gac02fbb3ef9a09baf0b5e7b32a55cf6c7">blaze::aligned</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> SparseMatrixType = <a class="code" href="../../da/d7a/classblaze_1_1CompressedMatrix.html">blaze::CompressedMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"></div><div class="line">SparseMatrixType A;</div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating an aligned submatrix of size 8x8, starting in row 0 and column 0</span></div><div class="line"><a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;SparseMatrixType,aligned&gt;</a> sv = submatrix&lt;aligned&gt;( A, 0UL, 0UL, 8UL, 8UL );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_on_submatrix"></a>
Submatrix on Submatrix</h1>
<p>It is also possible to create a submatrix view on another submatrix. In this context it is important to remember that the type returned by the <code><a class="el" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87" title="Creating a view on a specific submatrix of the given matrix. ">submatrix()</a></code> function is the same type as the type of the given submatrix, since the view on a submatrix is just another view on the underlying dense matrix:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> MatrixType    = <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix&lt;double,blaze::rowMajor&gt;</a>;</div><div class="line"><span class="keyword">using</span> SubmatrixType = <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix&lt;MatrixType&gt;</a>;</div><div class="line"></div><div class="line">MatrixType D1;</div><div class="line"></div><div class="line"><span class="comment">// ... Resizing and initialization</span></div><div class="line"></div><div class="line"><span class="comment">// Creating a submatrix view on the dense matrix D1</span></div><div class="line">SubmatrixType sm1 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( D1, 4UL, 4UL, 8UL, 16UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a submatrix view on the dense submatrix sm1</span></div><div class="line">SubmatrixType sm2 = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( sm1, 1UL, 1UL, 4UL, 8UL );</div></div><!-- fragment --><p><br />
 </p>
<h1><a class="anchor" id="submatrix_on_symmetric_matrices"></a>
Submatrix on Symmetric Matrices</h1>
<p>Submatrices can also be created on symmetric matrices (see the <a class="el" href="../../d4/dab/classblaze_1_1SymmetricMatrix.html" title="Matrix adapter for symmetric  matrices. ">SymmetricMatrix</a> class template):</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d4/dab/classblaze_1_1SymmetricMatrix.html">blaze::SymmetricMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d1/da2/classblaze_1_1Submatrix.html">blaze::Submatrix</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> SymmetricDynamicType = SymmetricMatrix&lt; DynamicMatrix&lt;int&gt; &gt;;</div><div class="line"><span class="keyword">using</span> SubmatrixType        = Submatrix&lt; SymmetricDynamicType &gt;;</div><div class="line"></div><div class="line"><span class="comment">// Setup of a 16x16 symmetric matrix</span></div><div class="line">SymmetricDynamicType A( 16UL );</div><div class="line"></div><div class="line"><span class="comment">// Creating a dense submatrix of size 8x12, starting in row 2 and column 4</span></div><div class="line">SubmatrixType sm = <a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A, 2UL, 4UL, 8UL, 12UL );</div></div><!-- fragment --><p>It is important to note, however, that (compound) assignments to such submatrices have a special restriction: The symmetry of the underlying symmetric matrix must not be broken! Since the modification of element <img class="formulaInl" alt="$ a_{ij} $" src="../../form_24.png"/> of a symmetric matrix also modifies the element <img class="formulaInl" alt="$ a_{ji} $" src="../../form_25.png"/>, the matrix to be assigned must be structured such that the symmetry of the symmetric matrix is preserved. Otherwise a <em>std::invalid_argument</em> exception is thrown:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="../../de/d1e/classblaze_1_1DynamicMatrix.html">blaze::DynamicMatrix</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="../../d4/dab/classblaze_1_1SymmetricMatrix.html">blaze::SymmetricMatrix</a>;</div><div class="line"></div><div class="line"><span class="comment">// Setup of two default 4x4 symmetric matrices</span></div><div class="line">SymmetricMatrix&lt; DynamicMatrix&lt;int&gt; &gt; A1( 4 ), A2( 4 );</div><div class="line"></div><div class="line"><span class="comment">// Setup of the 3x2 dynamic matrix</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//       ( 0 9 )</span></div><div class="line"><span class="comment">//   B = ( 9 8 )</span></div><div class="line"><span class="comment">//       ( 0 7 )</span></div><div class="line"><span class="comment">//</span></div><div class="line">DynamicMatrix&lt;int&gt; B( 3UL, 2UL );</div><div class="line">B(0,0) = 1;</div><div class="line">B(0,1) = 2;</div><div class="line">B(1,0) = 3;</div><div class="line">B(1,1) = 4;</div><div class="line">B(2,1) = 5;</div><div class="line">B(2,2) = 6;</div><div class="line"></div><div class="line"><span class="comment">// OK: Assigning B to a submatrix of A1 such that the symmetry can be preserved</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 0 1 2 )</span></div><div class="line"><span class="comment">//   A1 = ( 0 0 3 4 )</span></div><div class="line"><span class="comment">//        ( 1 3 5 6 )</span></div><div class="line"><span class="comment">//        ( 2 4 6 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A1, 0UL, 2UL, 3UL, 2UL ) = B;  <span class="comment">// OK</span></div><div class="line"></div><div class="line"><span class="comment">// Error: Assigning B to a submatrix of A2 such that the symmetry cannot be preserved!</span></div><div class="line"><span class="comment">//   The elements marked with X cannot be assigned unambiguously!</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//        ( 0 1 2 0 )</span></div><div class="line"><span class="comment">//   A2 = ( 1 3 X 0 )</span></div><div class="line"><span class="comment">//        ( 2 X 6 0 )</span></div><div class="line"><span class="comment">//        ( 0 0 0 0 )</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a class="code" href="../../d0/d48/group__views.html#ga92ecd6696c9080d5f3116b91836beb87">submatrix</a>( A2, 0UL, 1UL, 3UL, 2UL ) = B;  <span class="comment">// Assignment throws an exception!</span></div></div><!-- fragment --> </div><hr/>The documentation for this class was generated from the following file:<ul>
<li>blaze/math/views/submatrix/<a class="el" href="../../db/da8/views_2submatrix_2BaseTemplate_8h_source.html">BaseTemplate.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 05:50:33 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
